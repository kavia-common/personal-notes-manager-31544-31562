{"is_source_file": true, "format": "TypeScript", "description": "This file is a TypeScript module providing a set of functions to manage notes data. It includes functions to list, create, retrieve, update, delete, duplicate, and search notes, as well as list tags. The module interacts with a storage utility and defines an external API object for these operations.", "external_files": ["./types", "./storage"], "external_methods": ["storage.getJSON", "storage.setJSON", "crypto.randomUUID"], "published": ["listNotes", "createNote", "getNote", "updateNote", "deleteNote", "duplicateNote", "searchNotes", "listTags", "NotesAPI"], "classes": [], "methods": [{"name": "export async function listNotes(): Promise<Note[]> { listNotes", "description": "Returns all notes sorted by last updated date, descending.", "scope": "", "scopeKind": ""}, {"name": "export async function createNote(input: NoteInput): Promise<Note> { createNote", "description": "Creates a new note with provided input data and current timestamp.", "scope": "", "scopeKind": ""}, {"name": "export async function getNote(id: string): Promise<Note | undefined> { getNote", "description": "Retrieves a specific note by its ID.", "scope": "", "scopeKind": ""}, {"name": "export async function updateNote(id: string, input: NoteInput): Promise<Note | undefined> { updateNote", "description": "Updates an existing note identified by ID with new input data.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteNote(id: string): Promise<boolean> { deleteNote", "description": "Deletes a note by its ID.", "scope": "", "scopeKind": ""}, {"name": "export async function duplicateNote(id: string): Promise<Note | undefined> { duplicateNote", "description": "Creates a duplicate of an existing note identified by ID.", "scope": "", "scopeKind": ""}, {"name": "export async function searchNotes(q: string, tags: string[] = []): Promise<Note[]> { searchNotes", "description": "Searches notes by text query and tags, matching title, content, or tags.", "scope": "", "scopeKind": ""}, {"name": "export async function listTags(): Promise<string[]> { listTags", "description": "Returns a sorted list of unique tags across all notes.", "scope": "", "scopeKind": ""}, {"name": "function normalizeTags(tags: string[]): string[] { normalizeTags", "description": "Helper to normalize tags to lowercase and trim whitespace.", "scope": "", "scopeKind": ""}, {"name": "function cryptoRandomId(): string { cryptoRandomId", "description": "Generates a unique identifier for new notes.", "scope": "", "scopeKind": ""}], "calls": ["storage.getJSON", "storage.setJSON", "crypto.randomUUID", "storage.getJSON", "storage.setJSON", "storage.getJSON", "storage.getJSON", "storage.setJSON", "storage.getJSON", "storage.setJSON", "storage.getJSON", "storage.setJSON", "getNote", "createNote"], "search-terms": ["notes management", "note CRUD", "note search", "tag handling", "storage interaction", "note duplication", "notes API", "typescript notes"], "state": 2, "file_id": 10, "knowledge_revision": 25, "git_revision": "", "revision_history": [{"21": ""}, {"25": ""}], "ctags": [{"_type": "tag", "name": "KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^const KEY = 'notes:data:v1';$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "NotesAPI", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export const NotesAPI = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "activeTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const activeTags = normalizeTags(tags);$/", "language": "TypeScript", "kind": "constant", "scope": "searchNotes", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = await listNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "listTags", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = await listNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "searchNotes", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = storage.getJSON<Note[]>(KEY, []);$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = storage.getJSON<Note[]>(KEY, []);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = storage.getJSON<Note[]>(KEY, []);$/", "language": "TypeScript", "kind": "constant", "scope": "getNote", "scopeKind": "function"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const all = storage.getJSON<Note[]>(KEY, []);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    content: input.content,$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  create: createNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "createNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function createNote(input: NoteInput): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "cryptoRandomId", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^function cryptoRandomId(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const data = storage.getJSON<Note[]>(KEY, []);$/", "language": "TypeScript", "kind": "constant", "scope": "listNotes", "scopeKind": "function"}, {"_type": "tag", "name": "deleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function deleteNote(id: string): Promise<boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "duplicate", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  duplicate: duplicateNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "duplicateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function duplicateNote(id: string): Promise<Note | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const existing = all[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "get", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  get: getNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function getNote(id: string): Promise<Note | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const existing = all[idx];$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const idx = all.findIndex(n => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "listNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function listNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "listTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function listTags(): Promise<string[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "matchesQuery", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    const matchesQuery = query.length === 0$/", "language": "TypeScript", "kind": "constant", "scope": "searchNotes", "scopeKind": "function"}, {"_type": "tag", "name": "matchesTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    const matchesTags = activeTags.length === 0 || activeTags.every(t => n.tags.includes(t));$/", "language": "TypeScript", "kind": "constant", "scope": "searchNotes", "scopeKind": "function"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const n = await getNote(id);$/", "language": "TypeScript", "kind": "constant", "scope": "duplicateNote", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const next = all.filter(n => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "normalizeTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^function normalizeTags(tags: string[]): string[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const note: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "createNote", "scopeKind": "function"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const query = (q || '').toLowerCase().trim();$/", "language": "TypeScript", "kind": "constant", "scope": "searchNotes", "scopeKind": "function"}, {"_type": "tag", "name": "remove", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  remove: deleteNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const s = new Set<string>();$/", "language": "TypeScript", "kind": "constant", "scope": "listTags", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const s = new Set<string>();$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeTags", "scopeKind": "function"}, {"_type": "tag", "name": "search", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  search: searchNotes,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "searchNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function searchNotes(q: string, tags: string[] = []): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    tags: normalizeTags(input.tags),$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  tags: listTags,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    title: input.title,$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "update", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  update: updateNote,$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "updateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^export async function updateNote(id: string, input: NoteInput): Promise<Note | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^  const updated: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateNote", "scopeKind": "function"}, {"_type": "tag", "name": "v", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-31544-31562/notes_frontend/src/lib/notesService.ts", "pattern": "/^    const v = (t || '').trim().toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "normalizeTags", "scopeKind": "function"}], "hash": "766c11bb592d846564753a2f76890b0a", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/notesService.ts"}